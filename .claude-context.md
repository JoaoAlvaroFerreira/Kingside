# Kingside - Chess Analysis Board

## Project Overview
React Native/Expo chess application with an interactive analysis board supporting PGN variations.

## Tech Stack
- React Native / Expo SDK 52
- TypeScript
- chess.js - move validation and game state
- react-native-svg - SVG piece rendering

## Key Components

### InteractiveChessBoard (`src/components/chess/InteractiveChessBoard/`)
- Tap or drag-to-move pieces
- SVG piece images (cburnett set from Lichess)
- Coordinate labels (a-h, 1-8) with orientation support
- Visual indicators: selected square, valid moves (dots), captures (rings)
- Turn-based move validation
- Auto-promotion to queen

### MoveHistory (`src/components/chess/MoveHistory/`)
- Displays moves in standard PGN notation
- Variations shown in parentheses: `1. e4 e5 (1... c5) 2. Nf3`
- Click to navigate to any position
- Navigation buttons: start, back, forward, end
- Right-click (web) / long-press (mobile) to promote variation to main line
- Fixed height (250px) with vertical scrollbar

### MoveTree (`src/utils/MoveTree.ts`)
- Tree-based move structure supporting unlimited variations
- Methods: addMove, goBack, goForward, goToStart, goToEnd, navigateToNode
- promoteToMainLine() - swap variation with main line
- getFlatMoves() - flatten tree for display with depth/variation metadata
- toPgn() - generate PGN string with variations

## App.tsx Structure
- MoveTree state with force-update pattern for mutations
- Responsive layout: side-by-side on wide screens (>700px), stacked on narrow
- Status display: turn indicator, check/checkmate/draw detection
- New Game button to reset

## File Structure
```
App.tsx
src/
  components/
    chess/
      InteractiveChessBoard/
        InteractiveChessBoard.tsx
      MoveHistory/
        MoveHistory.tsx
      ChessBoard/          # (legacy, unused)
  utils/
    MoveTree.ts
```

## Dependencies
- chess.js
- react-native-svg
- expo (SDK 52)
